import{a as _}from"./chunk-Q245O2NB.js";import{b as c,d as b,h as C,j as F,k as I,m as O}from"./chunk-LA74YO2I.js";import{l as x}from"./chunk-Q7GCSFZH.js";import{a as k}from"./chunk-PTV3HNSO.js";import"./chunk-N33Y4MDM.js";import{t as y,v as f}from"./chunk-FYJFCBEW.js";import{Eb as m,Na as n,Rb as l,W as i,Za as g,qb as r,rb as o,sb as s,tb as p}from"./chunk-4DX7SM4S.js";import"./chunk-4CLCTAJ7.js";var S=class d{fb=i(I);activatedRoute=i(y);cartService=i(k);router=i(f);toastrService=i(x);id=null;checkOutForm;ngOnInit(){this.initForm(),this.getCartId()}checkoutByVisa(){this.checkOutForm.valid&&this.id?this.cartService.checkOutSessionByVisa(this.id,this.checkOutForm.value).subscribe({next:e=>{e.status==="success"&&window.open(e.session.url,"_self")},error:e=>console.log(e)}):console.log("Form invalid or ID missing")}checkoutByCash(){this.checkOutForm.valid&&this.id?this.cartService.checkOutByCash(this.id,this.checkOutForm.value).subscribe({next:e=>{e.status==="success"&&(this.toastrService.success(e.message,"FreshCart"),this.checkOutForm.reset(),this.router.navigateByUrl("/allorders"))},error:e=>console.log(e)}):console.log("Form invalid or ID missing")}getCartId(){this.activatedRoute.paramMap.subscribe({next:e=>{this.id=e.get("id")}})}initForm(){this.checkOutForm=this.fb.group({shippingAddress:this.fb.group({details:[null,[c.required]],phone:[null,[c.required,c.pattern(/^01[0-2,5]{1}[0-9]{8}$/)]],city:[null,[c.required]]})})}static \u0275fac=function(a){return new(a||d)};static \u0275cmp=g({type:d,selectors:[["app-checkout"]],decls:13,vars:16,consts:[[1,"bg-gray-100","shadow-2xl","p-10","border","border-green-100","rounded-3xl","md:w-1/2","mx-auto","my-20","transition-all","duration-300"],[1,"text-4xl","font-bold","text-center","text-green-800","pb-10","tracking-tight"],[3,"formGroup"],[3,"control","element","labelInput","idInput","typeInput"],[1,"flex","items-center","space-x-7","py-4"],["type","button",1,"btn",3,"click"]],template:function(a,t){if(a&1&&(o(0,"section",0)(1,"h1",1),l(2,"CheckOut"),s(),o(3,"form",2),p(4,"app-input",3),o(5,"app-input",3),l(6," number must be egyptian "),s(),p(7,"app-input",3),o(8,"div",4)(9,"button",5),m("click",function(){return t.checkoutByCash()}),l(10,"pay by cash"),s(),o(11,"button",5),m("click",function(){return t.checkoutByVisa()}),l(12,"pay by visa"),s()()()()),a&2){let u,h,v;n(3),r("formGroup",t.checkOutForm),n(),r("control",(u=t.checkOutForm.get("shippingAddress"))==null?null:u.get("details"))("element","text")("labelInput","Details")("idInput","details")("typeInput","text"),n(),r("control",(h=t.checkOutForm.get("shippingAddress"))==null?null:h.get("phone"))("element","input")("labelInput","Phone")("idInput","phone")("typeInput","tel"),n(2),r("control",(v=t.checkOutForm.get("shippingAddress"))==null?null:v.get("city"))("element","input")("labelInput","City")("idInput","city")("typeInput","text")}},dependencies:[O,C,b,F,_],encapsulation:2})};export{S as CheckoutComponent};
