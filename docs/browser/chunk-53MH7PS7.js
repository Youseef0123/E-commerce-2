import{a as k}from"./chunk-Q245O2NB.js";import{b as m,d as S,e as w,f as c,h as C,j as L,m as E}from"./chunk-LA74YO2I.js";import{a as F}from"./chunk-JRYUDLHO.js";import{a as y}from"./chunk-N33Y4MDM.js";import{v as I,w as x}from"./chunk-FYJFCBEW.js";import{Eb as f,Gb as h,Na as t,Rb as s,Sb as v,W as p,Za as b,lb as d,mb as u,qb as l,rb as o,sb as n,tb as g}from"./chunk-4DX7SM4S.js";import"./chunk-4CLCTAJ7.js";function D(i,e){i&1&&(o(0,"span"),g(1,"i",8),n())}function G(i,e){if(i&1&&(o(0,"p",7),s(1),n()),i&2){let a=h();t(),v(a.msgError)}}var _=class i{flag=!0;authService=p(F);router=p(I);cookieService=p(y);sub;msgError="";isLoading=!1;ngOnInit(){this.initForm()}logInForm;initForm(){this.logInForm=new w({email:new c(null,[m.required,m.email]),password:new c(null,[m.required,m.pattern("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$")])})}submitForm(){this.logInForm.valid&&(this.sub&&this.sub.unsubscribe(),this.isLoading=!0,this.sub=this.authService.logInForm(this.logInForm.value).subscribe({next:e=>{console.log(e),e.message==="success"&&(this.msgError="",this.cookieService.set("token",e.token),this.authService.tokenDecode(),console.log(e.token),this.router.navigate(["/home"])),this.isLoading=!1},error:e=>{this.msgError=e.error.message,this.isLoading=!1}}))}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static \u0275fac=function(a){return new(a||i)};static \u0275cmp=b({type:i,selectors:[["app-login"]],decls:13,vars:11,consts:[[1,"bg-gray-100","shadow-2xl","p-10","border","border-green-100","rounded-3xl","md:w-1/2","mx-auto","my-20","transition-all","duration-300"],[1,"text-4xl","font-bold","text-center","text-green-800","pb-10","tracking-tight"],[1,"space-y-6",3,"ngSubmit","formGroup"],[3,"control","labelInput","idInput","typeInput"],[3,"control","labelInput","idInput"],["type","submit",1,"w-full","py-3","mt-4","rounded-xl","bg-green-700","text-white","font-semibold","text-lg","tracking-wide","shadow-md","hover:bg-green-800","hover:shadow-lg","focus:ring-4","focus:ring-green-300","transition-all","duration-300",3,"disabled"],["routerLink","/forgetPassword",1,"block","text-center","text-green-700","hover:text-green-900","font-semibold","mt-3","transition-all"],[1,"text-center","text-xl","text-red-500","bg-red-200","p-2"],[1,"fa-solid","fa-spinner","animate-spin"]],template:function(a,r){a&1&&(o(0,"section",0)(1,"h1",1),s(2," Login Now "),n(),o(3,"form",2),f("ngSubmit",function(){return r.submitForm()}),g(4,"app-input",3),o(5,"app-input",4),s(6," Password must be at least 8 characters and include both letters and numbers. "),n(),o(7,"button",5),s(8," Login "),d(9,D,2,0,"span"),n(),o(10,"a",6),s(11,` Forgot Password?
`),n(),d(12,G,2,1,"p",7),n()()),a&2&&(t(3),l("formGroup",r.logInForm),t(),l("control",r.logInForm.get("email"))("labelInput","Email")("idInput","email")("typeInput","email"),t(),l("control",r.logInForm.get("password"))("labelInput","Password")("idInput","password"),t(2),l("disabled",r.logInForm.invalid),t(2),u(r.isLoading?9:-1),t(3),u(r.msgError?12:-1))},dependencies:[E,C,S,L,k,x],encapsulation:2})};export{_ as LoginComponent};
