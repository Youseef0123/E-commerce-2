import{a as S}from"./chunk-Q245O2NB.js";import{b as i,d as F,e as y,f as p,h as x,j as C,m as E}from"./chunk-LA74YO2I.js";import{a as I}from"./chunk-JRYUDLHO.js";import"./chunk-N33Y4MDM.js";import{v}from"./chunk-FYJFCBEW.js";import{Eb as h,Gb as f,Na as r,Rb as m,Sb as w,W as u,Za as b,lb as g,mb as c,qb as o,rb as s,sb as a,tb as d}from"./chunk-4DX7SM4S.js";import"./chunk-4CLCTAJ7.js";function _(l,e){l&1&&(s(0,"span"),d(1,"i",9),a())}function R(l,e){if(l&1&&(s(0,"p",8),m(1),a()),l&2){let n=f();r(),w(n.msgError)}}var P=class l{flag=!0;authService=u(I);router=u(v);msgError="";isLoading=!1;sub;registerForm;ngOnInit(){this.initForm()}initForm(){this.registerForm=new y({name:new p(null,[i.required,i.minLength(3),i.maxLength(20)]),email:new p(null,[i.required,i.email]),password:new p(null,[i.required,i.pattern("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$")]),rePassword:new p(null,[i.required]),phone:new p(null,[i.required,i.pattern("^01[0-2,5]{1}[0-9]{8}$")])},{validators:this.confirmPassword})}confirmPassword(e){let n=e.get("password")?.value,t=e.get("rePassword")?.value;return n===t?null:(e.get("rePassword")?.setErrors({mismatch:!0}),{mismatch:!0})}get name(){return this.registerForm.get("name")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get rePassword(){return this.registerForm.get("rePassword")}get phone(){return this.registerForm.get("phone")}submitForm(){this.registerForm.valid?(this.sub&&this.sub.unsubscribe(),this.isLoading=!0,this.sub=this.authService.registerForm(this.registerForm.value).subscribe({next:e=>{console.log(e),e.message==="success"&&(this.msgError="",this.router.navigate(["/login"])),this.isLoading=!1},error:e=>{console.log(e),this.isLoading=!1,this.msgError=e.error.message}})):this.registerForm.markAllAsTouched()}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}static \u0275fac=function(n){return new(n||l)};static \u0275cmp=b({type:l,selectors:[["app-register"]],decls:15,vars:22,consts:[[1,"bg-gray-100","shadow-2xl","p-10","border","border-green-100","rounded-3xl","md:w-1/2","mx-auto","my-20","transition-all","duration-300"],[1,"text-4xl","font-bold","text-center","text-green-800","pb-10","tracking-tight"],[3,"ngSubmit","formGroup"],[3,"control","idInput","labelInput","typeInput"],[3,"control","labelInput","idInput","typeInput"],[3,"control","labelInput","idInput"],[3,"control","idInput","labelInput"],["type","submit",1,"w-full","py-3","mt-4","rounded-xl","bg-green-700","text-white","font-semibold","text-lg","tracking-wide","shadow-md","hover:bg-green-800","hover:shadow-lg","focus:ring-4","focus:ring-green-300","transition-all","duration-300",3,"disabled"],[1,"text-center","text-xl","text-red-500","bg-red-200","p-2"],[1,"fa-solid","fa-spinner","animate-spin"]],template:function(n,t){n&1&&(s(0,"section",0)(1,"h1",1),m(2,"Register Now"),a(),s(3,"form",2),h("ngSubmit",function(){return t.submitForm()}),d(4,"app-input",3)(5,"app-input",4),s(6,"app-input",5),m(7," Password must be at least 8 characters and include both letters and numbers. "),a(),d(8,"app-input",6),s(9,"app-input",3),m(10," accept only egyptian numbers "),a(),s(11,"button",7),m(12," Register "),g(13,_,2,0,"span"),a(),g(14,R,2,1,"p",8),a()()),n&2&&(r(3),o("formGroup",t.registerForm),r(),o("control",t.registerForm.get("name"))("idInput","name")("labelInput","Name")("typeInput","text"),r(),o("control",t.registerForm.get("email"))("labelInput","Email")("idInput","email")("typeInput","email"),r(),o("control",t.registerForm.get("password"))("labelInput","Password")("idInput","password"),r(2),o("control",t.registerForm.get("rePassword"))("idInput","rePassword")("labelInput","rePassword"),r(),o("control",t.registerForm.get("phone"))("idInput","phone")("labelInput","Phone")("typeInput","tel"),r(2),o("disabled",t.registerForm.invalid),r(2),c(t.isLoading?13:-1),r(),c(t.msgError?14:-1))},dependencies:[E,x,F,C,S],encapsulation:2})};export{P as RegisterComponent};
