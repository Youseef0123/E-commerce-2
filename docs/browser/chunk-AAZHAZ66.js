import{a as G}from"./chunk-Q245O2NB.js";import{b as p,d as P,h as E,j as I,k as F,m as V}from"./chunk-LA74YO2I.js";import{a as _}from"./chunk-JRYUDLHO.js";import{a as S}from"./chunk-N33Y4MDM.js";import{v as h}from"./chunk-FYJFCBEW.js";import{Eb as b,Gb as m,Na as n,Pb as d,Rb as o,W as c,Za as x,aa as f,ba as v,lb as w,mb as C,qb as l,rb as i,sb as r,tb as y,zb as g}from"./chunk-4DX7SM4S.js";import"./chunk-4CLCTAJ7.js";function T(s,a){if(s&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return v(u.formStep1())}),y(1,"app-input",10),i(2,"button",11),o(3,"Verify Email"),r()()}if(s&2){let e=m();l("formGroup",e.verifyEmail),n(),l("control",e.verifyEmail.get("email"))("labelInput","Email")("idInput","email")("typeInput","email")}}function N(s,a){if(s&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return v(u.formStep2())}),y(1,"app-input",10),i(2,"button",11),o(3,"Verify Code"),r()()}if(s&2){let e=m();l("formGroup",e.verifyCode),n(),l("control",e.verifyCode.get("resetCode"))("labelInput","Code")("idInput","code")("typeInput","text")}}function R(s,a){if(s&1){let e=g();i(0,"form",9),b("ngSubmit",function(){f(e);let u=m();return v(u.formStep3())}),y(1,"app-input",10)(2,"app-input",10),i(3,"button",11),o(4,"Reset Password"),r()()}if(s&2){let e=m();l("formGroup",e.resetPass),n(),l("control",e.resetPass.get("email"))("labelInput","Email")("idInput","email")("typeInput","email"),n(),l("control",e.resetPass.get("newPassword"))("labelInput","New Password")("idInput","newPassword")("typeInput","password")}}var k=class s{fb=c(F);authService=c(_);cookieService=c(S);router=c(h);verifyEmail;verifyCode;resetPass;step=1;ngOnInit(){this.initForm()}initForm(){this.verifyEmail=this.fb.group({email:[null,[p.required,p.email]]}),this.verifyCode=this.fb.group({resetCode:[null,[p.required]]}),this.resetPass=this.fb.group({email:[null,[p.required,p.email]],newPassword:[null,[p.required,p.pattern("^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{8,}$")]]})}formStep1(){this.verifyEmail.valid&&this.authService.submitVerifyEmail(this.verifyEmail.value).subscribe({next:a=>{console.log(a),this.step=2}})}formStep2(){this.verifyCode.valid&&this.authService.submitVerifyCode(this.verifyCode.value).subscribe({next:a=>{console.log(a),this.step=3,this.resetPass.get("email")?.setValue(this.verifyEmail.get("email")?.value)}})}formStep3(){this.resetPass.valid&&this.authService.submitResetPassword(this.resetPass.value).subscribe({next:a=>{console.log(a),this.cookieService.set("token",a.token),this.router.navigate(["/home"])}})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=x({type:s,selectors:[["app-forget-password"]],decls:31,vars:25,consts:[[1,"py-10"],[1,"container","mx-auto","px-4"],[1,"flex","flex-col","sm:flex-row","items-center","justify-center","w-full","space-y-4","sm:space-y-0","sm:space-x-8","rtl:space-x-reverse","mb-10"],[1,"flex","items-center","space-x-2.5","rtl:space-x-reverse"],[1,"flex","items-center","justify-center","w-8","h-8","border","rounded-full","shrink-0"],[1,"font-medium","leading-tight"],[1,"text-sm"],[1,"max-w-md","mx-auto","bg-white","p-8","rounded-2xl","shadow-lg","space-y-6"],[1,"space-y-6",3,"formGroup"],[1,"space-y-6",3,"ngSubmit","formGroup"],[3,"control","labelInput","idInput","typeInput"],["type","submit",1,"btn","w-full","rounded-lg"]],template:function(e,t){e&1&&(i(0,"section",0)(1,"div",1)(2,"ol",2)(3,"li",3)(4,"span",4),o(5," 1 "),r(),i(6,"span")(7,"h3",5),o(8,"User info"),r(),i(9,"p",6),o(10,"Enter your email"),r()()(),i(11,"li",3)(12,"span",4),o(13," 2 "),r(),i(14,"span")(15,"h3",5),o(16,"Verification code"),r(),i(17,"p",6),o(18,"Check your email"),r()()(),i(19,"li",3)(20,"span",4),o(21," 3 "),r(),i(22,"span")(23,"h3",5),o(24,"Reset password"),r(),i(25,"p",6),o(26,"Set a new password"),r()()()(),i(27,"div",7),w(28,T,4,5,"form",8)(29,N,4,5,"form",8)(30,R,5,9,"form",8),r()()()),e&2&&(n(3),d("text-blue-600",t.step===1)("text-gray-500",t.step!==1),n(),d("border-blue-600",t.step===1)("border-gray-400",t.step!==1),n(7),d("text-blue-600",t.step===2)("text-gray-500",t.step!==2),n(),d("border-blue-600",t.step===2)("border-gray-400",t.step!==2),n(7),d("text-blue-600",t.step===3)("text-gray-500",t.step!==3),n(),d("border-blue-600",t.step===3)("border-gray-400",t.step!==3),n(8),C(t.step===1?28:t.step===2?29:t.step===3?30:-1))},dependencies:[V,E,P,I,G],encapsulation:2})};export{k as ForgetPasswordComponent};
